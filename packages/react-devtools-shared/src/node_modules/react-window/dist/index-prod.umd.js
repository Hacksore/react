!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("scheduler")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","scheduler"],t):t((e=e||self).ReactWindow={},e.React,e.ReactDOM,e.Scheduler)}(this,function(e,t,n,r){"use strict";function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e,t){return e.length===t.length&&e.every(function(e,n){return r=e,o=t[n],r===o;var r,o})};function s(e,t){var n;void 0===t&&(t=i);var r,o=[],s=!1;return function(){for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return s&&n===this&&t(l,o)?r:(r=e.apply(this,l),s=!0,n=this,o=l,r)}}var l=null;var a="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function c(e){cancelAnimationFrame(e.id)}function u(e,t){var n=a();var r={id:requestAnimationFrame(function o(){a()-n>=t?e.call(null):r.id=requestAnimationFrame(o)})};return r}var p="function"==typeof n.flushSync?n.flushSync:function(e){return e()},f=25,d=function(e){return e},h={hidden:!0},m={hidden:!0,rendersubtree:"invisible"},v={rendersubtree:"visible"},_=function(e){var n,i;function a(t){var n;(n=e.call(this,t)||this)._innerRef=void 0,n._isDisplayLockingSupported=function(){if(null===typeof l){var e=document.createElement("div");l="function"==typeof e.updateRendering}return l}(),n._outerRef=void 0,n._prerenderOverscanRowsTimeoutID=null,n._resetPointerEventsTimeoutID=null,n._callOnItemsDisplayed=void 0,n._callOnItemsDisplayed=s(function(e,t){var r=n.props.onItemsDisplayed;"function"==typeof r&&r(e,t)}),n._getItemStyleCache=void 0,n._getItemStyleCache=s(function(e){return{}}),n._innerRefSetter=function(e){var t=n.props.innerRef;n._innerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._onScroll=function(e){var t=e.currentTarget,r=t.clientHeight,o=t.scrollHeight,i=t.scrollTop,s=n.props.onScroll;p(function(){"function"==typeof s&&s(e),n.setState(function(e){var t=Math.min(i,o-r),s=Math.max(0,t);if(e.scrollTop===s)return null;var l=n._getVisibleIndicesForOffset(s),a=l[0],c=l[1],u=a>=e.startIndex&&c<=e.stopIndex;return{scrollTop:s,scrollUpdateWasRequested:!0,startIndex:u?e.startIndex:a,stopIndex:u?e.stopIndex:c}})})},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._prerenderOverscanRows=function(){n._prerenderOverscanRowsTimeoutID=null,r.unstable_runWithPriority(r.unstable_IdlePriority,function(){n.setState(function(e){var t=n.props,r=t.itemCount,o=t.maxNumPrerenderRows,i=void 0===o?f:o,s=n._getVisibleIndicesForOffset(e.scrollTop),l=s[0],a=s[1],c=a-l,u=Math.min(c,i),p=Math.max(0,l-u),d=Math.min(r-1,a+u);return e.startIndex===p&&e.stopIndex===d?null:{startIndex:p,stopIndex:d}})})},n._refSetterForDisplayLockingOnly=function(e){n._isDisplayLockingSupported&&null!=e&&e.hidden&&e.updateRendering()},n._resetPointerEvents=function(){n._resetPointerEventsTimeoutID=null,null!=n._innerRef&&"none"===n._innerRef.style.pointerEvents&&(n._innerRef.style.pointerEvents="auto"),n._getItemStyleCache(-1)};var o=t.initialScrollOffset,i="number"==typeof o?o:0,a=n._getVisibleIndicesForOffset(i),c=a[0],u=a[1];return n.state={scrollTop:i,scrollUpdateWasRequested:"number"==typeof o,startIndex:c,stopIndex:u},n}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var _=a.prototype;return _.scrollTo=function(e){var t=this;e=Math.max(0,e),this.setState(function(n){if(n.scrollTop===e)return null;var r=t._getVisibleIndicesForOffset(e),o=r[0],i=r[1],s=o>=n.startIndex&&i<=n.stopIndex;return{scrollTop:e,scrollUpdateWasRequested:!0,startIndex:s?n.startIndex:o,stopIndex:s?n.stopIndex:i}})},_.scrollToItem=function(e,t){void 0===t&&(t="smart");var n=this.props,r=n.height,o=n.itemCount,i=n.itemSize,s=this.state.scrollTop;e=Math.max(0,Math.min(e,o-1));var l=Math.max(0,o*i-r),a=Math.min(l,e*i),c=Math.max(0,e*i-r+i);switch("smart"===t&&(t=s>=c-r&&s<=a+r?"minimum":"center"),t){case"start":this.scrollTo(a);break;case"end":this.scrollTo(c);break;case"center":var u=Math.round(c+(a-c)/2);u<Math.ceil(r/2)?this.scrollTo(0):u>l+Math.floor(r/2)?this.scrollTo(l):this.scrollTo(u);break;case"minimum":default:s>=c&&s<=a?this.scrollTo(s):s<c?this.scrollTo(c):this.scrollTo(a)}},a.getDerivedStateFromProps=function(e,t){return null},_.componentDidMount=function(){this._commitHook()},_.componentDidUpdate=function(){this._commitHook()},_.componentWillUnmount=function(){null!==this._resetPointerEventsTimeoutID&&c(this._resetPointerEventsTimeoutID),null!==this._prerenderOverscanRowsTimeoutID&&c(this._prerenderOverscanRowsTimeoutID)},_.render=function(){var e=this.props,n=e.className,r=e.height,i=e.innerElementType,s=e.itemCount,l=e.itemKey,a=void 0===l?d:l,c=e.itemSize,u=e.itemRenderer,p=e.outerElementType,f=e.style,_=e.width,y=this.state,I=y.scrollTop,R=y.startIndex,T=y.stopIndex,g=this._getVisibleIndicesForOffset(I),b=g[0],x=g[1],O=[];if(s>0)for(var D=this._getItemStyleCache(c),S=R;S<=T;S++){var w=S<b||S>x,M=this._isDisplayLockingSupported&&w,P=M?S+"!":S,E=void 0;D.hasOwnProperty(P)?E=D[P]:(E={position:"absolute",left:0,top:S*c,height:c,width:"100%"},M&&(E.display="block"),D[P]=E);var k=void 0;k=this._isDisplayLockingSupported?w?m:v:w?h:null,O.push(u({domProperties:k,key:a(S),index:S,ref:M?this._refSetterForDisplayLockingOnly:void 0,style:E}))}return t.createElement(p||"div",{className:n,onScroll:this._onScroll,ref:this._outerRefSetter,style:o({position:"relative",height:r,width:_,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform"},f)},t.createElement(i||"div",{children:O,ref:this._innerRefSetter,style:{height:c*s,width:"100%",pointerEvents:"none"}}))},_._commitHook=function(){var e=this.props,t=e.itemCount,n=e.prerenderMode,o=this.state,i=o.scrollTop;o.scrollUpdateWasRequested&&null!=this._outerRef&&(this._outerRef.scrollTop=i);if(t>0){var s=this._getVisibleIndicesForOffset(i),l=s[0],a=s[1];this._callOnItemsDisplayed(l,a)}this._resetPointerEventsDebounced(),"function"==typeof r.unstable_runWithPriority&&("idle"===n?this._prerenderOverscanRows():"idle+debounce"===n&&this._prerenderOverscanRowsDebounced())},_._getVisibleIndicesForOffset=function(e){var t=this.props,n=t.height,r=t.itemCount,o=t.itemSize;if(0===r)return[0,0];var i=Math.max(0,Math.min(r-1,Math.floor(e/o))),s=i*o,l=Math.ceil((n+e-s)/o),a=Math.max(0,Math.min(r-1,i+l-1));return[Math.max(0,i-1),Math.max(0,Math.min(r-1,a+1))]},_._prerenderOverscanRowsDebounced=function(){null!==this._prerenderOverscanRowsTimeoutID&&c(this._prerenderOverscanRowsTimeoutID),this._prerenderOverscanRowsTimeoutID=u(this._prerenderOverscanRows,150)},_._resetPointerEventsDebounced=function(){null!==this._resetPointerEventsTimeoutID&&c(this._resetPointerEventsTimeoutID),this._resetPointerEventsTimeoutID=u(this._resetPointerEvents,150)},a}(t.PureComponent);e.SimpleList=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index-prod.umd.js.map
