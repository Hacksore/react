!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("scheduler")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","scheduler"],t):t((e=e||self).ReactWindow={},e.React,e.ReactDOM,e.Scheduler)}(this,function(e,t,n,r){"use strict";function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e,t){return e.length===t.length&&e.every(function(e,n){return r=e,o=t[n],r===o;var r,o})};function s(e,t){var n;void 0===t&&(t=i);var r,o=[],s=!1;return function(){for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return s&&n===this&&t(l,o)?r:(r=e.apply(this,l),s=!0,n=this,o=l,r)}}var l=null;var a="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function u(e){cancelAnimationFrame(e.id)}function c(e,t){var n=a();var r={id:requestAnimationFrame(function o(){a()-n>=t?e.call(null):r.id=requestAnimationFrame(o)})};return r}var p="function"==typeof n.flushSync?n.flushSync:function(e){return e()},f=25,d=function(e){return e},h={hidden:!0},m={hidden:!0,rendersubtree:"invisible"},v={rendersubtree:"visible"},y=function(e){var n,i;function a(t){var n;(n=e.call(this,t)||this)._innerRef=void 0,n._isDisplayLockingSupported=function(){if(null===typeof l){var e=document.createElement("div");l="function"==typeof e.updateRendering}return l}(),n._outerRef=void 0,n._prerenderOverscanRowsTimeoutID=null,n._resetPointerEventsTimeoutID=null,n._callOnItemsDisplayed=void 0,n._callOnItemsDisplayed=s(function(e,t){var r=n.props.onItemsDisplayed;"function"==typeof r&&r(e,t)}),n._getItemStyleCache=void 0,n._getItemStyleCache=s(function(e){return{}}),n._innerRefSetter=function(e){var t=n.props.innerRef;n._innerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._onScroll=function(e){var t=e.currentTarget,r=t.clientHeight,o=t.scrollHeight,i=t.scrollTop,s=n.props.onScroll;p(function(){"function"==typeof s&&s(e),n.setState(function(e){var t=Math.min(i,o-r),s=Math.max(0,t);if(e.scrollTop===s)return null;var l=n._getVisibleIndicesForOffset(s),a=l[0],u=l[1],c=a>=e.startIndex&&u<=e.stopIndex;return{scrollTop:s,scrollUpdateWasRequested:!0,startIndex:c?e.startIndex:a,stopIndex:c?e.stopIndex:u}})})},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._prerenderOverscanRows=function(){n._prerenderOverscanRowsTimeoutID=null,r.unstable_runWithPriority(r.unstable_IdlePriority,function(){n.setState(function(e){var t=n.props,r=t.itemCount,o=t.maxNumPrerenderRows,i=void 0===o?f:o,s=n._getVisibleIndicesForOffset(e.scrollTop),l=s[0],a=s[1],u=a-l,c=Math.min(u,i),p=Math.max(0,l-c),d=Math.min(r-1,a+c);return e.startIndex===p&&e.stopIndex===d?null:{startIndex:p,stopIndex:d}})})},n._refSetterForDisplayLockingOnly=function(e){n._isDisplayLockingSupported&&null!=e&&e.hidden&&e.updateRendering()},n._resetPointerEvents=function(){n._resetPointerEventsTimeoutID=null,null!=n._innerRef&&"none"===n._innerRef.style.pointerEvents&&(n._innerRef.style.pointerEvents="auto"),n._getItemStyleCache(-1)};var o=t.initialScrollOffset,i="number"==typeof o?o:0,a=n._getVisibleIndicesForOffset(i),u=a[0],c=a[1];return n.state={scrollTop:i,scrollUpdateWasRequested:"number"==typeof o,startIndex:u,stopIndex:c},n}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var y=a.prototype;return y.scrollTo=function(e){var t=this;e=Math.max(0,e),this.setState(function(n){if(n.scrollTop===e)return null;var r=t._getVisibleIndicesForOffset(e),o=r[0],i=r[1],s=o>=n.startIndex&&i<=n.stopIndex;return{scrollTop:e,scrollUpdateWasRequested:!0,startIndex:s?n.startIndex:o,stopIndex:s?n.stopIndex:i}})},y.scrollToItem=function(e,t){void 0===t&&(t="smart");var n=this.props,r=n.height,o=n.itemCount,i=n.itemSize,s=this.state.scrollTop;e=Math.max(0,Math.min(e,o-1));var l=Math.max(0,o*i-r),a=Math.min(l,e*i),u=Math.max(0,e*i-r+i);switch("smart"===t&&(t=s>=u-r&&s<=a+r?"minimum":"center"),t){case"start":this.scrollTo(a);break;case"end":this.scrollTo(u);break;case"center":var c=Math.round(u+(a-u)/2);c<Math.ceil(r/2)?this.scrollTo(0):c>l+Math.floor(r/2)?this.scrollTo(l):this.scrollTo(c);break;case"minimum":default:s>=u&&s<=a?this.scrollTo(s):s<u?this.scrollTo(u):this.scrollTo(a)}},a.getDerivedStateFromProps=function(e,t){return _(e),null},y.componentDidMount=function(){this._commitHook()},y.componentDidUpdate=function(){this._commitHook()},y.componentWillUnmount=function(){null!==this._resetPointerEventsTimeoutID&&u(this._resetPointerEventsTimeoutID),null!==this._prerenderOverscanRowsTimeoutID&&u(this._prerenderOverscanRowsTimeoutID)},y.render=function(){var e=this.props,n=e.className,r=e.height,i=e.innerElementType,s=e.itemCount,l=e.itemKey,a=void 0===l?d:l,u=e.itemSize,c=e.itemRenderer,p=e.outerElementType,f=e.style,y=e.width,_=this.state,I=_.scrollTop,b=_.startIndex,R=_.stopIndex,g=this._getVisibleIndicesForOffset(I),T=g[0],w=g[1],x=[];if(s>0)for(var O=this._getItemStyleCache(u),D=b;D<=R;D++){var S=D<T||D>w,M=this._isDisplayLockingSupported&&S,P=M?D+"!":D,E=void 0;O.hasOwnProperty(P)?E=O[P]:(E={position:"absolute",left:0,top:D*u,height:u,width:"100%"},M&&(E.display="block"),O[P]=E);var k=void 0;k=this._isDisplayLockingSupported?S?m:v:S?h:null,x.push(c({domProperties:k,key:a(D),index:D,ref:M?this._refSetterForDisplayLockingOnly:void 0,style:E}))}return t.createElement(p||"div",{className:n,onScroll:this._onScroll,ref:this._outerRefSetter,style:o({position:"relative",height:r,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform"},f)},t.createElement(i||"div",{children:x,ref:this._innerRefSetter,style:{height:u*s,width:"100%",pointerEvents:"none"}}))},y._commitHook=function(){var e=this.props,t=e.itemCount,n=e.prerenderMode,o=this.state,i=o.scrollTop;o.scrollUpdateWasRequested&&null!=this._outerRef&&(this._outerRef.scrollTop=i);if(t>0){var s=this._getVisibleIndicesForOffset(i),l=s[0],a=s[1];this._callOnItemsDisplayed(l,a)}this._resetPointerEventsDebounced(),"function"==typeof r.unstable_runWithPriority&&("idle"===n?this._prerenderOverscanRows():"idle+debounce"===n&&this._prerenderOverscanRowsDebounced())},y._getVisibleIndicesForOffset=function(e){var t=this.props,n=t.height,r=t.itemCount,o=t.itemSize;if(0===r)return[0,0];var i=Math.max(0,Math.min(r-1,Math.floor(e/o))),s=i*o,l=Math.ceil((n+e-s)/o),a=Math.max(0,Math.min(r-1,i+l-1));return[Math.max(0,i-1),Math.max(0,Math.min(r-1,a+1))]},y._prerenderOverscanRowsDebounced=function(){null!==this._prerenderOverscanRowsTimeoutID&&u(this._prerenderOverscanRowsTimeoutID),this._prerenderOverscanRowsTimeoutID=c(this._prerenderOverscanRows,150)},y._resetPointerEventsDebounced=function(){null!==this._resetPointerEventsTimeoutID&&u(this._resetPointerEventsTimeoutID),this._resetPointerEventsTimeoutID=c(this._resetPointerEvents,150)},a}(t.PureComponent),_=null;_=function(e){var t=e.height,n=e.itemRenderer,r=e.itemSize;if("function"!=typeof n)throw Error('An invalid "itemRenderer" prop has been specified. Value should be a function that returns React elements. "'+(null===n?"null":typeof n)+'" was specified.');if("number"!=typeof r)throw Error('An invalid "itemSize" prop has been specified. Value should be a number. "'+(null===r?"null":typeof r)+'" was specified.');if("number"!=typeof t)throw Error('An invalid "height" prop has been specified. Lists must specify a number for height. "'+(null===t?"null":typeof t)+'" was specified.')},e.SimpleList=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index-dev.umd.js.map
